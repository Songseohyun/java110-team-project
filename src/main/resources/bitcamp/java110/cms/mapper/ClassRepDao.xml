<?xml version="1.0" encoding="UTF-8"?>
<!-- ClassFile 클래스가 사용할 SQL이 들어 있는 파일 -->
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
  <mapper namespace="bitcamp.java110.cms.dao.ClassRepDao">
    
    <resultMap type="ClassRep" id="crepMap">
        <id 	column="rno" 		property="no"/>
        <result column="meno" 		property="meno"/>
        <result column="cno" 		property="cno"/>
        <result column="titl" 		property="titl"/>
        <result column="conts" 		property="conts"/>
        <result column="star" 		property="star"/>
        <result column="phot" 		property="phot"/>
        <result column="rgdt" 		property="rgdt"/>
        <result column="nick"		property="mentee.nick"/>
        <result column="phot"		property="mentee.phot"/>
    </resultMap>
    
    <sql id="select1">
        
    </sql>
    
    <select id="findAll" resultMap="crepMap">
        select 
            meno,cno,titl,conts,star,phot,rgdt
        from 
            p_cls_rip
        order by
            rno asc;
    </select>
    
    <select id="findByCno" resultMap="crepMap" parameterType="int">
        select 
			pe.nick,
			pe.phot,
			psp.conts,
			psp.phot,
			psp.star,
			psp.rgdt
		from
			p_mete as pe inner join p_cls_rep as psp
				on pe.meno = psp.meno
			inner join p_cls as ps
				on psp.cno = ps.cno
		where psp.cno = #{no}
		order by psp.rno desc;
    </select>
    
    
  </mapper>
