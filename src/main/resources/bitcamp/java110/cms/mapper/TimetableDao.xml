<?xml version="1.0" encoding="UTF-8"?>

<!-- TimetableDao 클래스가 사용할 SQL이 들어 있는 파일 -->
<!DOCTYPE mapper
  PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN"
  "http://mybatis.org/dtd/mybatis-3-mapper.dtd">
<mapper namespace="bitcamp.java110.cms.dao.TimetableDao">

	<resultMap type="timetable" id="timetableMap">
		<id column="ctno" property="no" />
		<result column="cno" property="cno" />
		<result column="date" property="date" />
		<result column="stime" property="stime" />
		<result column="capa" property="capa" />


	</resultMap>

	<sql id="select1">
		select
		ctno,
		cno,
		date,
		stime,
		capa
		from
		p_cls_ttab


	</sql>

	<select id="findAll" resultMap="timetableMap"
		parameterType="map">
		<include refid="select1"></include>



		order by
		ctno asc
	</select>

	<select id="findByCtno" resultMap="timetableMap"
		parameterType="int">
		<include refid="select1"></include>
		where
		ctno=#{value}
	</select>

	<select id="findByCno" resultMap="timetableMap"
		parameterType="int">
		<include refid="select1"></include>
		where
		ctno=#{value}
	</select>

	<insert id="insert" parameterType="timetable"
		useGeneratedKeys="true" keyColumn="ctno" keyProperty="no">

		INSERT INTO
        p_cls_ttab( cno, date, stime, capa) 
		VALUES(#{cno},now(), now(),#{capa})

	</insert>


	<update id="update" parameterType="timetable">

		update p_cls_ttab

		<set>

			<if test="cno>0">cno= #{cno},</if>
			<if test="capa>0">capa= #{capa},</if>
			

		</set>
		where
		ctno=#{no}
	</update>


</mapper>
